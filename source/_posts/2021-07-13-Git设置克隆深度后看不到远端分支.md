---
title: Git设置克隆深度后看不到远端分支
date: 2021-07-13 23:25:21
categories:
- Computers & Technology
- Git 
tags:
- Git
- SourceTree
---

最近克隆一个项目，为了加快速度和节省空间，在克隆的时候设置了 depth=1 也就是只记录最近一次提交，在 SourceTree 里操作如下

{% asset_img "depth.webp" %}

克隆之后文件历史如下，只会有一行记录

<!--more-->

{% asset_img "orphan-history.webp" %}

此时想要切换分支发现远端分支显示不全，只有浅克隆的分支。

{% asset_img "branch-sourcetree.webp" %}

执行 `git branch -a` 显示也是如此

{% asset_img "branch-bash.webp" %}

经过查询文档 [git-remote - Manage set of tracked repositories](https://git-scm.com/docs/git-remote#Documentation/git-remote.txt-emset-branchesem) 
找到了 git remote 命令，用来管理追踪的远程分支，其中 set-branches 命令用来更改追踪的分支，可以在仓库设置完成后来追踪新的远程分支。这里直接使用
`git remote set-branches origin '*'`，如果只想追踪某个分支，也可以使用 `--add` 命令。然后再做一次 `git fetch -v`，在 SourceTree 
中就是 Fetch，就可以看到添加的远程分支了。

{% asset_img "fetch.webp" %}